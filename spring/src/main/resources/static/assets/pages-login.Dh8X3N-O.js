import{c as e,o as s,w as a,a as t,i as u,n as o,r as l,b as p,d as i,t as r,e as m,f as n,g as d,h as c,u as f,F as _,j as g,k as v,l as h,s as y,m as w}from "./index-B7Dt8O4Z.js";import{p as x,_ as V,a as b,b as j}from "./uni-popup.WT4hdFIw.js";import{_ as k,r as S}from "./uni-app.es.CJ55vtPu.js";import{_ as C,u as T,U}from "./user.DtQT2dzs.js";import{s as B}from "./common.BCVR7ney.js";const I=k({name:"uniPopupMessage",mixins:[x],props:{type:{type:String,default:"success"},message:{type:String,default:""},duration:{type:Number,default:3e3},maskShow:{type:Boolean,default:!1}},data:()=>({}),created(){this.popup.maskShow=this.maskShow,this.popup.messageChild=this},methods:{timerClose(){0!==this.duration&&(clearTimeout(this.timer),this.timer=setTimeout((()=>{this.popup.close()}),this.duration))}}},[["render",function(m, n, d, c, f, _){const g=p,v=u;return s(),e(v,{class:"uni-popup-message"},{default:a((()=>[t(v,{class:o(["uni-popup-message__box fixforpc-width","uni-popup__"+d.type])},{default:a((()=>[l(m.$slots,"default",{},(()=>[t(g,{class:o(["uni-popup-message-text","uni-popup__"+d.type+"-text"])},{default:a((()=>[i(r(d.message),1)])),_:1},8,["class"])]),!0)])),_:3},8,["class"])])),_:3})}],["__scopeId","data-v-ad4a514f"]]),P=k(m({__name:"login",setup(e){const u=n(new U),o=n(""),l=n("error"),p=n();return(e, m)=>{const n=S(g("uni-easyinput"),V),x=S(g("uni-forms-item"),C),k=v,U=S(g("uni-forms"),b),P=S(g("uni-popup-message"),I),F=S(g("uni-popup"),j);return s(),d(_,null,[c("div",{id:"input-form-top"}),t(U,{id:"input-form",modelValue:u.value,rules:f(T),"validate-trigger":"blur"},{default:a((()=>[t(x,{class:"item",label:"账号：",name:"account"},{default:a((()=>[t(n,{modelValue:u.value.account,"onUpdate:modelValue":m[0]||(m[0]= e=>u.value.account=e),type:"text"},null,8,["modelValue"])])),_:1}),t(x,{class:"item",label:"密码：",name:"password"},{default:a((()=>[t(n,{modelValue:u.value.password,"onUpdate:modelValue":m[1]||(m[1]= e=>u.value.password=e),type:"password"},null,8,["modelValue"])])),_:1}),t(k,{onClick:m[2]||(m[2]= e=>{return s=u.value,void h({url:B+"/user/login",method:"POST",data:s,success(e){const s=e.data;o.value=s.msg,200==e.statusCode&&(l.value="success",y("me",s.data),setTimeout((()=>w({url:"/pages/host"})),2500))},fail(){o.value="网络连接失败"},complete(){var e;null==(e=p.value)||e.open()}});var s})},{default:a((()=>[i(r("登录"))])),_:1})])),_:1},8,["modelValue","rules"]),t(F,{ref_key:"messageBox",ref:p,type:"message"},{default:a((()=>[t(P,{message:o.value,type:l.value,is:""},null,8,["message","type"])])),_:1},512)],64)}}}),[["__scopeId","data-v-44dac638"]]);export{P as default};
