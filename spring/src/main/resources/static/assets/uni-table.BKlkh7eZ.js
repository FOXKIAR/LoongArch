import{c as e,o as t,w as i,r as a,a as s,q as d,i as n,X as l,b as h,d as r,t as c,v as o,n as u,a4 as b,g as p,h as k}from "./index-B7Dt8O4Z.js";import{_ as f}from "./uni-app.es.CJ55vtPu.js";const m=f({name:"UniCard",emits:["click"],props:{title:{type:String,default:""},subTitle:{type:String,default:""},padding:{type:String,default:"10px"},margin:{type:String,default:"15px"},spacing:{type:String,default:"0 10px"},extra:{type:String,default:""},cover:{type:String,default:""},thumbnail:{type:String,default:""},isFull:{type:Boolean,default:!1},isShadow:{type:Boolean,default:!0},shadow:{type:String,default:"0px 0px 3px 1px rgba(0, 0, 0, 0.08)"},border:{type:Boolean,default:!0}},methods:{onClick(e){this.$emit("click",e)}}},[["render",function(b, p, k, f, m, y){const g=l,x=n,_=h;return t(),e(x,{class:u(["uni-card",{"uni-card--full":k.isFull,"uni-card--shadow":k.isShadow,"uni-card--border":k.border}]),style:o({margin:k.isFull?0:k.margin,padding:k.spacing,"box-shadow":k.isShadow?k.shadow:""})},{default:i((()=>[a(b.$slots,"cover",{},(()=>[k.cover?(t(),e(x,{key:0,class:"uni-card__cover"},{default:i((()=>[s(g,{class:"uni-card__cover-image",mode:"widthFix",onClick:p[0]||(p[0]= e=>y.onClick("cover")),src:k.cover},null,8,["src"])])),_:1})):d("",!0)]),!0),a(b.$slots,"title",{},(()=>[k.title||k.extra?(t(),e(x,{key:0,class:"uni-card__header"},{default:i((()=>[s(x,{class:"uni-card__header-box",onClick:p[1]||(p[1]= e=>y.onClick("title"))},{default:i((()=>[k.thumbnail?(t(),e(x,{key:0,class:"uni-card__header-avatar"},{default:i((()=>[s(g,{class:"uni-card__header-avatar-image",src:k.thumbnail,mode:"aspectFit"},null,8,["src"])])),_:1})):d("",!0),s(x,{class:"uni-card__header-content"},{default:i((()=>[s(_,{class:"uni-card__header-content-title uni-ellipsis"},{default:i((()=>[r(c(k.title),1)])),_:1}),k.title&&k.subTitle?(t(),e(_,{key:0,class:"uni-card__header-content-subtitle uni-ellipsis"},{default:i((()=>[r(c(k.subTitle),1)])),_:1})):d("",!0)])),_:1})])),_:1}),s(x,{class:"uni-card__header-extra",onClick:p[2]||(p[2]= e=>y.onClick("extra"))},{default:i((()=>[s(_,{class:"uni-card__header-extra-text"},{default:i((()=>[r(c(k.extra),1)])),_:1})])),_:1})])),_:1})):d("",!0)]),!0),s(x,{class:"uni-card__content",style:o({padding:k.padding}),onClick:p[3]||(p[3]= e=>y.onClick("content"))},{default:i((()=>[a(b.$slots,"default",{},void 0,!0)])),_:3},8,["style"]),s(x,{class:"uni-card__actions",onClick:p[4]||(p[4]= e=>y.onClick("actions"))},{default:i((()=>[a(b.$slots,"actions",{},void 0,!0)])),_:3})])),_:3},8,["class","style"])}],["__scopeId","data-v-a25085bf"]]);const y=f({name:"TableCheckbox",emits:["checkboxSelected"],props:{indeterminate:{type:Boolean,default:!1},checked:{type:[Boolean,String],default:!1},disabled:{type:Boolean,default:!1},index:{type:Number,default:-1},cellData:{type:Object,default:()=>({})}},watch:{checked(e){"boolean"==typeof this.checked?this.isChecked=e:this.isChecked=!0},indeterminate(e){this.isIndeterminate=e}},data:()=>({isChecked:!1,isDisabled:!1,isIndeterminate:!1}),created(){"boolean"==typeof this.checked&&(this.isChecked=this.checked),this.isDisabled=this.disabled},methods:{selected(){this.isDisabled||(this.isIndeterminate=!1,this.isChecked=!this.isChecked,this.$emit("checkboxSelected",{checked:this.isChecked,data:this.cellData}))}}},[["render",function(a, d, l, h, r, c){const o=n;return t(),e(o,{class:"uni-table-checkbox",onClick:c.selected},{default:i((()=>[l.indeterminate?(t(),e(o,{key:1,class:"checkbox__inner checkbox--indeterminate"},{default:i((()=>[s(o,{class:"checkbox__inner-icon"})])),_:1})):(t(),e(o,{key:0,class:u(["checkbox__inner",{"is-checked":r.isChecked,"is-disable":r.isDisabled}])},{default:i((()=>[s(o,{class:"checkbox__inner-icon"})])),_:1},8,["class"]))])),_:1},8,["onClick"])}],["__scopeId","data-v-382b44b5"]]);const g=f({name:"uniTr",components:{tableCheckbox:y},props:{disabled:{type:Boolean,default:!1},keyValue:{type:[String,Number],default:""}},options:{virtualHost:!0},data:()=>({value:!1,border:!1,selection:!1,widthThArr:[],ishead:!0,checked:!1,indeterminate:!1}),created(){this.root=this.getTable(),this.head=this.getTable("uniThead"),this.head&&(this.ishead=!1,this.head.init(this)),this.border=this.root.border,this.selection=this.root.type,this.root.trChildren.push(this);const e=this.root.data.find((e=>e[this.root.rowKey]===this.keyValue));e&&(this.rowData=e),this.root.isNodata()},mounted(){if(this.widthThArr.length>0){const e="selection"===this.selection?50:0;this.root.minWidth=Number(this.widthThArr.reduce(((e, t)=>Number(e)+Number(t))))+e}},unmounted(){const e=this.root.trChildren.findIndex((e=>e===this));this.root.trChildren.splice(e,1),this.root.isNodata()},methods:{minWidthUpdate(e){if(this.widthThArr.push(e),this.widthThArr.length>0){const e="selection"===this.selection?50:0;this.root.minWidth=Number(this.widthThArr.reduce(((e, t)=>Number(e)+Number(t))))+e}},checkboxSelected(e){let t=this.root.data.find((e=>e[this.root.rowKey]===this.keyValue));this.checked=e.checked,this.root.check(t||this,e.checked,t?this.keyValue:null)},change(e){this.root.trChildren.forEach((t=>{t===this&&this.root.check(this,e.detail.value.length>0)}))},getTable(e="uniTable"){let t=this.$parent,i=t.$options.name;for(; i!==e;){if(t=t.$parent,!t)return!1;i=t.$options.name}return t}}},[["render",function(e, i, n, l, h, r){const c=b("table-checkbox");return t(),p("tr",{class:"uni-table-tr"},["selection"===h.selection&&h.ishead?(t(),p("th",{key:0,class:u(["checkbox",{"tr-table--border":h.border}])},[s(c,{checked:h.checked,indeterminate:h.indeterminate,disabled:n.disabled,onCheckboxSelected:r.checkboxSelected},null,8,["checked","indeterminate","disabled","onCheckboxSelected"])],2)):d("",!0),a(e.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-1f0302c2"]]);const x=f({name:"uniTd",options:{virtualHost:!0},props:{width:{type:[String,Number],default:""},align:{type:String,default:"left"},rowspan:{type:[Number,String],default:1},colspan:{type:[Number,String],default:1}},data:()=>({border:!1}),created(){this.root=this.getTable(),this.border=this.root.border},methods:{getTable(){let e=this.$parent,t=e.$options.name;for(; "uniTable"!==t;){if(e=e.$parent,!e)return!1;t=e.$options.name}return e}}},[["render",function(e, i, s, d, n, l){return t(),p("td",{class:u(["uni-table-td",{"table--border":n.border}]),rowspan:s.rowspan,colspan:s.colspan,style:o({width:s.width+"px","text-align":s.align})},[a(e.$slots,"default",{},void 0,!0)],14,["rowspan","colspan"])}],["__scopeId","data-v-8bee57a9"]]);const _=f({name:"uniTable",options:{virtualHost:!0},emits:["selection-change"],props:{data:{type:Array,default:()=>[]},border:{type:Boolean,default:!1},stripe:{type:Boolean,default:!1},type:{type:String,default:""},emptyText:{type:String,default:"没有更多数据"},loading:{type:Boolean,default:!1},rowKey:{type:String,default:""}},data:()=>({noData:!0,minWidth:0,multiTableHeads:[]}),watch:{loading(e){},data(e){this.theadChildren,this.theadChildren&&this.theadChildren.rowspan,this.noData=!1}},created(){this.trChildren=[],this.thChildren=[],this.theadChildren=null,this.backData=[],this.backIndexData=[]},methods:{isNodata(){this.theadChildren;let e=1;this.theadChildren&&(e=this.theadChildren.rowspan),this.noData=this.trChildren.length-e<=0},selectionAll(){let e=1,t=this.theadChildren;this.theadChildren?e=t.rowspan-1:t=this.trChildren[0];let i=this.data&&this.data.length>0;t.checked=!0,t.indeterminate=!1,this.trChildren.forEach(((t, a)=>{if(!t.disabled){if(t.checked=!0,i&&t.keyValue){const e=this.data.find((e=>e[this.rowKey]===t.keyValue));this.backData.find((t=>t[this.rowKey]===e[this.rowKey]))||this.backData.push(e)}a>e-1&&-1===this.backIndexData.indexOf(a-e)&&this.backIndexData.push(a-e)}})),this.$emit("selection-change",{detail:{value:this.backData,index:this.backIndexData}})},toggleRowSelection(e, t){e=[].concat(e),this.trChildren.forEach(((i, a)=>{const s=e.findIndex((e=>"number"==typeof e?e===a-1:e[this.rowKey]===i.keyValue));let d=i.checked;-1!==s&&(i.checked="boolean"==typeof t?t:!i.checked,d!==i.checked&&this.check(i.rowData||i,i.checked,i.rowData?i.keyValue:null,!0))})),this.$emit("selection-change",{detail:{value:this.backData,index:this.backIndexData}})},clearSelection(){let e=this.theadChildren;this.theadChildren||(e=this.trChildren[0]),e.checked=!1,e.indeterminate=!1,this.trChildren.forEach((e=>{e.checked=!1})),this.backData=[],this.backIndexData=[],this.$emit("selection-change",{detail:{value:[],index:[]}})},toggleAllSelection(){let e=[],t=1,i=this.theadChildren;this.theadChildren?t=i.rowspan-1:i=this.trChildren[0],this.trChildren.forEach(((i, a)=>{i.disabled||a>t-1&&e.push(a-t)})),this.toggleRowSelection(e)},check(e, t, i, a){let s=this.theadChildren;this.theadChildren||(s=this.trChildren[0]);let d=this.trChildren.findIndex(((t, i)=>e===t));if(d<0&&(d=this.data.findIndex((e=>e[this.rowKey]===i))+1),this.trChildren.filter((e=>!e.disabled&&e.keyValue)).length,0===d)return void(t?this.selectionAll():this.clearSelection());if(t)i&&this.backData.push(e),this.backIndexData.push(d-1);else{const e=this.backData.findIndex((e=>e[this.rowKey]===i)),t=this.backIndexData.findIndex((e=>e===d-1));i&&this.backData.splice(e,1),this.backIndexData.splice(t,1)}this.trChildren.find(((e, t)=>t>0&&!e.checked&&!e.disabled))?(s.indeterminate=!0,s.checked=!1):(s.indeterminate=!1,s.checked=!0),0===this.backIndexData.length&&(s.indeterminate=!1),a||this.$emit("selection-change",{detail:{value:this.backData,index:this.backIndexData}})}}},[["render",function(s, l, h, r, b, f){const m=n;return t(),e(m,{class:u(["uni-table-scroll",{"table--border":h.border,"border-none":!b.noData}])},{default:i((()=>[k("table",{class:u(["uni-table",{"table--stripe":h.stripe}]),border:"0",cellpadding:"0",cellspacing:"0",style:o({"min-width":b.minWidth+"px"})},[a(s.$slots,"default",{},void 0,!0),b.noData?(t(),p("tr",{key:0,class:"uni-table-loading"},[k("td",{class:u(["uni-table-text",{"empty-border":h.border}])},c(h.emptyText),3)])):d("",!0),h.loading?(t(),e(m,{key:1,class:u(["uni-table-mask",{"empty-border":h.border}])},{default:i((()=>[k("div",{class:"uni-table--loader"})])),_:1},8,["class"])):d("",!0)],6)])),_:3},8,["class"])}],["__scopeId","data-v-04867182"]]);export{m as _,g as a,x as b,_ as c,y as d};
